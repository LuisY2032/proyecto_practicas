<p-toast></p-toast>

<h2 class="mb-3">Gesti√≥n de Usuarios</h2>

<p-table [value]="usuarios" dataKey="uid">
  <ng-template pTemplate="header">
    <tr>
      <th>Email</th>
      <th>Rol</th>
      <th>Estado</th>
      <th>Acciones</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-usuario>
  <tr>
    <td>{{ usuario.email }}</td>
    <td>
      <select [(ngModel)]="usuario.rol" (change)="actualizarRol(usuario)">
        <option value="administrador">Administrador</option>
        <option value="usuario">Usuario</option>
      </select>
    </td>
    <td>{{ usuario.estado }}</td>
    <td class="acciones-btns">
  <button pButton label="Bloquear" icon="pi pi-lock"
          class="p-button-sm p-button-danger"
          (click)="cambiarEstado(usuario)"
          *ngIf="usuario.estado === 'activo'">
  </button>

  <button pButton label="Activar" icon="pi pi-unlock"
          class="p-button-sm p-button-success"
          (click)="cambiarEstado(usuario)"
          *ngIf="usuario.estado === 'bloqueado'">
  </button>

  <button pButton label="Eliminar" icon="pi pi-trash"
          class="p-button-sm p-button-danger"
          (click)="eliminarUsuario(usuario.uid)">
  </button>
</td>

  </tr>
</ng-template>

</p-table>

